<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.53">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <title>Manual Migration Database scripts | PACDoc</title><meta name="description" content="PACMan documentation">
    <link rel="preload" href="/assets/style.b1036708.css" as="style" /><link rel="stylesheet" href="/assets/style.b1036708.css" />
    <link rel="modulepreload" href="/assets/app.4217e908.js"><link rel="modulepreload" href="/assets/DatabaseScripts.html.156e498f.js"><link rel="modulepreload" href="/assets/DatabaseScripts.html.e2142c72.js"><link rel="prefetch" href="/assets/index.html.5860b4a2.js" as="script" /><link rel="prefetch" href="/assets/Adding a New Field to Pacman.html.18cf48d0.js" as="script" /><link rel="prefetch" href="/assets/BulkUpload.html.319d08e4.js" as="script" /><link rel="prefetch" href="/assets/DomainEvents.html.d636f19d.js" as="script" /><link rel="prefetch" href="/assets/Tutorials.html.e3d2e5df.js" as="script" /><link rel="prefetch" href="/assets/New Organisations.html.c92b134b.js" as="script" /><link rel="prefetch" href="/assets/Authentication.html.873d3cb1.js" as="script" /><link rel="prefetch" href="/assets/AzureEnvironment.html.5f16cc83.js" as="script" /><link rel="prefetch" href="/assets/BuildsAndDeployments.html.28a4adb9.js" as="script" /><link rel="prefetch" href="/assets/DataMigration.html.1e366e4a.js" as="script" /><link rel="prefetch" href="/assets/Merlin.html.7f8e27b5.js" as="script" /><link rel="prefetch" href="/assets/Monitoring.html.ee69b44d.js" as="script" /><link rel="prefetch" href="/assets/PMS.html.3ffa1e19.js" as="script" /><link rel="prefetch" href="/assets/Rider.html.45f99f4d.js" as="script" /><link rel="prefetch" href="/assets/Suppliers.html.3f17fe78.js" as="script" /><link rel="prefetch" href="/assets/404.html.d2dc3323.js" as="script" /><link rel="prefetch" href="/assets/index.html.ab4e5934.js" as="script" /><link rel="prefetch" href="/assets/Adding a New Field to Pacman.html.13a28cb1.js" as="script" /><link rel="prefetch" href="/assets/BulkUpload.html.38b05b5a.js" as="script" /><link rel="prefetch" href="/assets/DomainEvents.html.12d8673d.js" as="script" /><link rel="prefetch" href="/assets/Tutorials.html.7590eda2.js" as="script" /><link rel="prefetch" href="/assets/New Organisations.html.d5c6a793.js" as="script" /><link rel="prefetch" href="/assets/Authentication.html.07c5ec36.js" as="script" /><link rel="prefetch" href="/assets/AzureEnvironment.html.fb2a8726.js" as="script" /><link rel="prefetch" href="/assets/BuildsAndDeployments.html.90bd2310.js" as="script" /><link rel="prefetch" href="/assets/DataMigration.html.9cecf286.js" as="script" /><link rel="prefetch" href="/assets/Merlin.html.afd04fe7.js" as="script" /><link rel="prefetch" href="/assets/Monitoring.html.3fd29932.js" as="script" /><link rel="prefetch" href="/assets/PMS.html.7176dbfe.js" as="script" /><link rel="prefetch" href="/assets/Rider.html.afd1c89a.js" as="script" /><link rel="prefetch" href="/assets/Suppliers.html.ee62df65.js" as="script" /><link rel="prefetch" href="/assets/404.html.66012d09.js" as="script" />
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/" class=""><!----><span class="site-name">PACDoc</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/" class="" aria-label="Home"><!--[--><!--]--> Home <!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" placeholder="Search" autocomplete="off" spellcheck="false" value><!----></form></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/" class="" aria-label="Home"><!--[--><!--]--> Home <!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading">Overview <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/Overview/Authentication.md/" class="sidebar-item" aria-label="Authentication"><!--[--><!--]--> Authentication <!--[--><!--]--></a><!----></li><li><a href="/Overview/AzureEnvironment.md/" class="sidebar-item" aria-label="Azure Environment"><!--[--><!--]--> Azure Environment <!--[--><!--]--></a><!----></li><li><a href="/Overview/BuildsAndDeployments.md/" class="sidebar-item" aria-label="Builds And Deployments"><!--[--><!--]--> Builds And Deployments <!--[--><!--]--></a><!----></li><li><a href="/Overview/DatabaseScripts.md/" class="sidebar-item" aria-label="Database Scripts"><!--[--><!--]--> Database Scripts <!--[--><!--]--></a><!----></li><li><a href="/Overview/DataMigration.md/" class="sidebar-item" aria-label="Data Migration"><!--[--><!--]--> Data Migration <!--[--><!--]--></a><!----></li><li><a href="/Overview/Merlin.md/" class="sidebar-item" aria-label="Merlin"><!--[--><!--]--> Merlin <!--[--><!--]--></a><!----></li><li><a href="/Overview/Monitoring.md/" class="sidebar-item" aria-label="Monitoring"><!--[--><!--]--> Monitoring <!--[--><!--]--></a><!----></li><li><a href="/Overview/Rider.md/" class="sidebar-item" aria-label="Rider"><!--[--><!--]--> Rider <!--[--><!--]--></a><!----></li><li><a href="/Overview/PMS.md/" class="sidebar-item" aria-label="PMS"><!--[--><!--]--> PMS <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading">Pacman Items <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/Items/BulkUpload.md/" class="sidebar-item" aria-label="Bulk Upload"><!--[--><!--]--> Bulk Upload <!--[--><!--]--></a><!----></li><li><a href="/Items/Adding a New Field to Pacman.md/" class="sidebar-item" aria-label="Adding a New Field to Pacman"><!--[--><!--]--> Adding a New Field to Pacman <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading">Pacman Suppliers <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/Suppliers/Suppliers.md/" class="sidebar-item" aria-label="Suppliers"><!--[--><!--]--> Suppliers <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading">Organisations <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/Organisations/New Organisations.md/" class="sidebar-item" aria-label="Organisations"><!--[--><!--]--> Organisations <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading">Miscellaneous <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/Miscellaneous/DomainEvents.md/" class="sidebar-item" aria-label="DomainEvents"><!--[--><!--]--> DomainEvents <!--[--><!--]--></a><!----></li><li><a href="/Miscellaneous/Tutorials.md/" class="sidebar-item" aria-label="Tutorials"><!--[--><!--]--> Tutorials <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="manual-migration-database-scripts" tabindex="-1"><a class="header-anchor" href="#manual-migration-database-scripts" aria-hidden="true">#</a> Manual Migration Database scripts</h1><p>The scripts listed here are intended to perform rarely performed or large scale actions that take too long through the UI.</p><p>The scripts are located in <code>/Scripts/Database/Manual Data Migration</code>.</p><h2 id="the-scripts" tabindex="-1"><a class="header-anchor" href="#the-scripts" aria-hidden="true">#</a> The Scripts</h2><p>Quick note: All of these directly act on the database and will bypass any business logic written in code. Changes will not get propogated to any PMSes (in all likelihood).</p><ul><li><code>AddUsers.sql</code> - Bulk add users to Pacman.</li><li><code>DeleteDeviations.sql</code> - Wipe all deviations (including treatment type) from a collection of sites</li><li><code>DeleteItem.sql</code> - Delete an Item and all things linked to it, including deviations.</li><li><code>DeleteSite.sql</code> - Delete a site and all things linked to it</li><li><code>LinkSupplierProducts.sql</code> - Used when there&#39;s been issues applying supplier products to items. Mostly obseleted by newer versions of Pacman</li></ul><h2 id="specialised-scripts" tabindex="-1"><a class="header-anchor" href="#specialised-scripts" aria-hidden="true">#</a> Specialised Scripts</h2><h3 id="user-management" tabindex="-1"><a class="header-anchor" href="#user-management" aria-hidden="true">#</a> User Management</h3><p>Located in the <code>User Management</code> folder.</p><ul><li><code>AddPracticeGroupUserstoSitesforPracticeGroup.sql</code> - Script used to give all users in a specified practice group explicit access to the sites in the practice group. This was to work around a limitation where most user rights are evaluated in a site-specific manner</li><li><code>GiveAllUsersSiteVisibilityAdmin.sql</code> - Gives all non-superusers the site visibility admin role. This is because it&#39;s not assignable by non-superusers and was resulting in a lot of helpdesk requests</li></ul><h3 id="new-sites" tabindex="-1"><a class="header-anchor" href="#new-sites" aria-hidden="true">#</a> New Sites</h3><p>Located in the <code>New Site</code> folder.</p><ul><li><code>HideAllItemsForSite.sql</code> - Adds a deviation for each Item in Pacman to hide it for the specified site. When a new site is created in Merlin, all items in Merlin are set to hidden for that site so the site can unhide the items it wants to offer. This script mirrors that behaviour, but in Pacman, to keep the 2 in sync</li></ul><h3 id="deviations" tabindex="-1"><a class="header-anchor" href="#deviations" aria-hidden="true">#</a> Deviations</h3><p>Located in the <code>Deviations</code> folder.</p><ul><li><code>ApplyCodeSpecificFlagToItemDeviations.sql</code> - Applies the code-specific flag to price deviations, to work around a limitation in the way Pacman handles deviations</li></ul></div><!--[--><!--]--></div><footer class="page-meta"><!----><!----><!----></footer><!----><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/assets/app.4217e908.js" defer></script>
  </body>
</html>
